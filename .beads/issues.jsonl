{"id":"qae-06q","title":"make -l be on by default","description":"I think I usually want it.","status":"closed","priority":2,"issue_type":"feature","owner":"maw@pobox.com","created_at":"2026-02-10T11:35:54.778772-05:00","created_by":"Michael Wolf","updated_at":"2026-02-12T08:34:02.046873-05:00","closed_at":"2026-02-12T08:34:02.046873-05:00","close_reason":"Git log search (-l) is now on by default. Added --no-log flag to opt out."}
{"id":"qae-0ar","title":"Add --max-depth flag to limit directory traversal depth","status":"open","priority":2,"issue_type":"feature","owner":"maw@pobox.com","created_at":"2026-02-09T18:51:08.62381-05:00","created_by":"Michael Wolf","updated_at":"2026-02-09T18:51:08.62381-05:00"}
{"id":"qae-4x3","title":"Binary files produce false positive matches","description":"Binary files are reported as matching patterns they do not contain. Example: searching for 'mailXname' falsely matches .so and binary files like libmysqlclient.so and unbound_exporter. Verified with 'strings' that the pattern is not present. Need to investigate how grep-searcher handles binary content detection and matching.","status":"closed","priority":0,"issue_type":"bug","owner":"maw@pobox.com","created_at":"2026-02-11T15:00:33.555871-05:00","created_by":"Michael Wolf","updated_at":"2026-02-11T19:08:04.24141-05:00","closed_at":"2026-02-11T19:08:04.24141-05:00","close_reason":"Fixed: binary files were reported as matching because saw_binary was checked without verifying that matched() was actually called. Added !sink.matches.is_empty() guard."}
{"id":"qae-5ia","title":"Add -g GLOB / --include flag for rg-style file filtering","status":"closed","priority":2,"issue_type":"feature","owner":"maw@pobox.com","created_at":"2026-02-09T18:51:08.890541-05:00","created_by":"Michael Wolf","updated_at":"2026-02-10T10:51:53.81518-05:00","closed_at":"2026-02-10T10:51:53.81518-05:00","close_reason":"Resolved as part of qae-dkt fix — -g now takes a glob value for rg-style file filtering"}
{"id":"qae-8sn","title":"deadgrep integration: rg-compat output mode","description":"Teach deadgrep to use qae. Likely involves optional output format changes to qae plus changes to deadgrep.","notes":"## Implementation Complete (untested in Emacs)\n\nAll code changes in src/main.rs on branch `deadgrep`. Builds clean, all 56 tests pass (15 new rg-compat tests).\n\n### What was done\n- `--color=ansi` triggers rg-compatible ANSI output (byte-identical to rg)\n- `--smart-case` / `--case-sensitive` with proper precedence\n- `--type-list` prints file types in rg format (matches exactly)\n- `--no-ignore-vcs` disables .gitignore but keeps .ignore\n- `-B`/`-A` context flags accepted but ignored (deferred to qae-n9e)\n- Hidden no-op flags: `--no-config`, `--line-number`, `--no-column`, `--with-filename`, `--no-heading`\n- `--glob/-g` now repeatable (Vec\u003cString\u003e)\n- `pattern` is Option\u003cString\u003e (optional when `--type-list` used)\n\n### Integration tests added (15 tests)\n- ANSI output: escape codes, exact format match, multiple highlights per line, binary warning on stderr, default case sensitivity\n- Smart case: lowercase→insensitive, uppercase→sensitive, works in ANSI mode\n- Case-sensitive overrides: beats --smart-case, beats -i\n- --type-list: output content, works without pattern\n- --no-ignore-vcs: disables gitignore, keeps .ignore\n- No-op flags: all deadgrep compat flags accepted silently\n- Context flags: -B/-A accepted without error\n\n### Still needs\n1. **Emacs testing**: `(setq deadgrep-executable \"/path/to/qae\")` then `M-x deadgrep`\n2. Context lines (qae-n9e) — deadgrep works without them but will not show context\n\n\n---\n\n## Implementation Complete (untested in Emacs)\n\nAll code changes in src/main.rs on branch `deadgrep`. Builds clean, all 41 existing tests pass.\n\n### What was done\n- `--color=ansi` triggers rg-compatible ANSI output (byte-identical to rg)\n- `--smart-case` / `--case-sensitive` with proper precedence\n- `--type-list` prints file types in rg format (matches exactly)\n- `--no-ignore-vcs` disables .gitignore but keeps .ignore\n- `-B`/`-A` context flags accepted but ignored (deferred to qae-n9e)\n- Hidden no-op flags: `--no-config`, `--line-number`, `--no-column`, `--with-filename`, `--no-heading`\n- `--glob/-g` now repeatable (Vec\u003cString\u003e)\n- `pattern` is Option\u003cString\u003e (optional when `--type-list` used)\n\n### Still needs\n1. **Emacs testing**: `(setq deadgrep-executable \"/path/to/qae\")` then `M-x deadgrep`\n2. Context lines (qae-n9e) — deadgrep works without them but won't show context\n3. Consider adding integration tests for rg-compat output format\n\n### Key verification commands\n```\nenv -u FUNCNEST cargo build\n./target/debug/qae --color=ansi --line-number --no-heading --no-column --with-filename --smart-case -- \"pattern\" .\n./target/debug/qae --type-list\nenv -u FUNCNEST cargo test\n```","status":"in_progress","priority":3,"issue_type":"feature","owner":"maw@pobox.com","created_at":"2026-02-09T18:51:10.290182-05:00","created_by":"Michael Wolf","updated_at":"2026-02-11T18:56:03.748741-05:00"}
{"id":"qae-8tf","title":"Add --exclude flag to exclude files matching a pattern","status":"open","priority":2,"issue_type":"feature","owner":"maw@pobox.com","created_at":"2026-02-09T18:51:09.146428-05:00","created_by":"Michael Wolf","updated_at":"2026-02-09T18:51:09.146428-05:00"}
{"id":"qae-c38","title":"sort git log results nearer to related file results","description":"```\n% qae -l issue226628\n./control-example/files/dspam/libmysqlclient.so.20.3.29\n  (binary file matches)\n\n./copyleft-example/files/dspam/libmysqlclient.so.20.3.29\n  (binary file matches)\n\n./copyleft-example/files/spamassassin4/local.cf\n  223:#issue226628 - ACTION: Make Abusix part of SA\n\n./copyleft-example/files/unbound_exporter/unbound_exporter\n  (binary file matches)\n\n./tmp/exim-mailfront20.tar\n  (binary file matches)\n\n./tmp/exim-mailfront21.tar\n  (binary file matches)\n\n./copyleft-example (git log):\n  6ce00ec issue226628 - add abusix to SA\n```\n\nThe git matches should be moved to before the matches in ./tmp.  Maybe just sorting the paths would do, although we'd need to think this through.","status":"closed","priority":1,"issue_type":"feature","owner":"maw@pobox.com","created_at":"2026-02-10T11:35:34.328243-05:00","created_by":"Michael Wolf","updated_at":"2026-02-10T12:02:51.245583-05:00","closed_at":"2026-02-10T12:02:51.245583-05:00","close_reason":"Implemented interleaved sorting of git log results with file results"}
{"id":"qae-chh","title":"Add a way to emit shell completion snippets (zsh and bash as a minimum, but any other shells you think should get it too are ok)","status":"closed","priority":2,"issue_type":"task","owner":"maw@pobox.com","created_at":"2026-02-10T11:27:01.810452-05:00","created_by":"Michael Wolf","updated_at":"2026-02-12T07:54:27.687486-05:00","closed_at":"2026-02-12T07:54:27.687486-05:00","close_reason":"Added --completions \u003cSHELL\u003e flag using clap_complete. Supports bash, zsh, fish, elvish, and powershell.","comments":[{"id":1,"issue_id":"qae-chh","author":"Michael Wolf","text":"There's probably a library that already scrapes CLI definitions and does half the work for you already.","created_at":"2026-02-10T19:19:37Z"}]}
{"id":"qae-cmo","title":"Reconsider the binary name","description":"qae isn't a great abbreviation. qro would be better but reads like a QR code tool (and is the abbreviation for Querétaro).","status":"open","priority":3,"issue_type":"task","owner":"maw@pobox.com","created_at":"2026-02-09T18:51:10.544063-05:00","created_by":"Michael Wolf","updated_at":"2026-02-09T18:51:10.544063-05:00"}
{"id":"qae-d3q","title":"Consider multithreaded search with deterministic output ordering","description":"rg presents results in nondeterministic order due to multithreading. If we go multithread, we need to collate and sort before displaying. Need to evaluate whether the speedup is worth the complexity.","status":"open","priority":3,"issue_type":"feature","owner":"maw@pobox.com","created_at":"2026-02-09T18:51:09.976151-05:00","created_by":"Michael Wolf","updated_at":"2026-02-09T18:51:09.976151-05:00"}
{"id":"qae-dkt","title":"-g doesn't seem to work","description":"mw@palimpsest:~/devel/quaero (master) % qae pattern -g '*.ts'\nqae: *.ts: IO error for operation on *.ts: No such file or directory (os error 2)","status":"closed","priority":0,"issue_type":"bug","created_at":"2026-02-10T07:31:36.045321-05:00","updated_at":"2026-02-10T10:51:53.577457-05:00","closed_at":"2026-02-10T10:51:53.577457-05:00","close_reason":"Changed -g/--glob from boolean flag to value-taking option (rg-style file filter). Now qae pattern -g '*.ts' correctly filters files by glob."}
{"id":"qae-fhh","title":"Add a flag or flags to ignore specific files","description":"Simple version:\n\nqae --ignore ./tmp \"foo\"\n\n","status":"in_progress","priority":2,"issue_type":"feature","owner":"maw@pobox.com","created_at":"2026-02-10T14:23:52.676914-05:00","created_by":"Michael Wolf","updated_at":"2026-02-10T14:28:40.827693-05:00","comments":[{"id":2,"issue_id":"qae-fhh","author":"Michael Wolf","text":"This needs some actual design work, of course.","created_at":"2026-02-10T19:28:00Z"}]}
{"id":"qae-n9e","title":"Add context lines support (--before-context / --after-context)","description":"Support --before-context=N / -B and --after-context=N / -A flags for showing context lines around matches. Required for full deadgrep integration (context UI toggle). Implementation: configure SearcherBuilder with .before_context()/.after_context(), extend ContentSink to implement the context() method on the Sink trait, add a ContentMatch::Context variant for non-matching lines, and in rg output mode use - separator instead of : for context lines with -- between non-adjacent groups.","status":"open","priority":3,"issue_type":"feature","owner":"maw@pobox.com","created_at":"2026-02-11T12:27:58.311521-05:00","created_by":"Michael Wolf","updated_at":"2026-02-11T12:28:08.263305-05:00","dependencies":[{"issue_id":"qae-n9e","depends_on_id":"qae-8sn","type":"blocks","created_at":"2026-02-11T12:28:26.817664-05:00","created_by":"Michael Wolf"}]}
{"id":"qae-qzb","title":"split main.rs into several smaller files","status":"closed","priority":2,"issue_type":"task","owner":"maw@pobox.com","created_at":"2026-02-10T11:05:33.951708-05:00","created_by":"Michael Wolf","updated_at":"2026-02-12T08:03:21.437759-05:00","closed_at":"2026-02-12T08:03:21.437759-05:00","close_reason":"Split main.rs into cli, search, git, output modules. All 41 tests pass."}
{"id":"qae-r0n","title":"Add support for search git repos by ref","description":"It should be possible to use qae to check if any git repos have a given ref and, if so, say which one(s).  It should choose the git repos to search in in the same way as -l does: parent dirs + 1 level of child dirs.","status":"open","priority":2,"issue_type":"feature","owner":"maw@pobox.com","created_at":"2026-02-10T14:18:27.541078-05:00","created_by":"Michael Wolf","updated_at":"2026-02-10T14:18:27.541078-05:00"}
{"id":"qae-tza","title":"Ignore binary files by default","description":"Binary matches are annoying and can make the terminal beep. Also handle files that are mostly text but contain some garbage bytes.","status":"closed","priority":1,"issue_type":"bug","owner":"maw@pobox.com","created_at":"2026-02-09T18:51:09.470576-05:00","created_by":"Michael Wolf","updated_at":"2026-02-10T11:17:51.565746-05:00","closed_at":"2026-02-10T11:17:51.565746-05:00","close_reason":"Implemented binary file detection using grep-searcher BinaryDetection::quit. Binary files now show '(binary file matches)' instead of raw content."}
{"id":"qae-u3d","title":"Handle long lines with matches far into the line","description":"Need highlighting and/or truncation for matches many characters into long lines.","status":"open","priority":2,"issue_type":"feature","owner":"maw@pobox.com","created_at":"2026-02-09T18:51:09.7258-05:00","created_by":"Michael Wolf","updated_at":"2026-02-09T18:51:09.7258-05:00"}
